import React, { useRef, useState } from 'react'
import classes from "/src/style/Contacto.module.css"
import { Link } from 'react-router-dom'
import emailjs from '@emailjs/browser';
import { FormattedMessage } from 'react-intl';


export default function Contacto() {


    const [mensaje, setMensaje] = useState("");
    const form = useRef()

    
    function handleChange(event) {
        const { name, value } = event.target;
        setMensaje(prevMensaje => ({
            ...prevMensaje,
            [name]: value
        }));
    }



    function handleFormSubmit(event){
            
        emailjs
            .sendForm('service_r5da7gh', 'template_1vugzp6', form.current, {
                publicKey: '-tVycMvnjnCHq8v9N',
            })
            .then(
                () => {
                    console.log('SUCCESS!');
                },
                (error) => {
                    console.log('FAILED...', error.text);
                },
            );
        setMensaje("")
    };





    return (
        <section id="contacto" className={classes.contactoInfo}>
            <div  className={classes.contactoContainer}>
                <h3 className={classes.contactoTitulo}>
                    <span className={classes.exclamacion}>ยก</span>
                        <FormattedMessage id="contacto"/>
                    <span className={classes.exclamacion2}>!</span>
                </h3>
                <div className={classes.linksContainer}>
                    <Link to="https://github.com/MfrMesa" target="_blank" className={classes.linksContacto}>
                        <svg className={classes.svg} width="40" height="40" viewBox="0 0 30 30" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M27.9879 7.65801C26.6465 5.30216 24.8271 3.43702 22.529 2.06218C20.2307 0.687277 17.7215 0 14.9999 0C12.2785 0 9.76858 0.687488 7.47069 2.06218C5.17246 3.43695 3.35308 5.30216 2.01174 7.65801C0.670603 10.0138 0 12.5863 0 15.3756C0 18.726 0.953606 21.7389 2.8613 24.4149C4.76878 27.091 7.23297 28.9429 10.2537 29.9705C10.6053 30.0374 10.8656 29.9904 11.0348 29.8305C11.2041 29.6705 11.2887 29.4701 11.2887 29.2302C11.2887 29.1901 11.2853 28.8299 11.2788 28.1491C11.2721 27.4682 11.269 26.8743 11.269 26.3675L10.8197 26.4472C10.5333 26.501 10.172 26.5237 9.73574 26.5173C9.29971 26.5111 8.84705 26.4642 8.37839 26.3771C7.90952 26.2908 7.47342 26.0906 7.06975 25.7769C6.66628 25.4633 6.37986 25.0527 6.21055 24.5459L6.01524 24.0851C5.88506 23.7784 5.68011 23.4377 5.40012 23.0642C5.12012 22.6904 4.83698 22.437 4.55056 22.3035L4.41381 22.2032C4.32269 22.1365 4.23814 22.0561 4.15995 21.9627C4.08183 21.8694 4.02334 21.776 3.98428 21.6824C3.94515 21.5888 3.97758 21.512 4.0819 21.4518C4.18622 21.3916 4.37475 21.3623 4.64832 21.3623L5.03879 21.4221C5.29922 21.4757 5.62135 21.6355 6.0056 21.9026C6.38964 22.1695 6.70534 22.5164 6.95277 22.9433C7.2524 23.4907 7.61339 23.9078 8.03676 24.1948C8.4598 24.4818 8.88632 24.6251 9.31592 24.6251C9.74552 24.6251 10.1166 24.5917 10.4292 24.5253C10.7415 24.4586 11.0345 24.3582 11.308 24.2248C11.4252 23.3302 11.7443 22.6429 12.2649 22.1625C11.5228 22.0826 10.8556 21.9622 10.263 21.8021C9.67075 21.6418 9.05871 21.3816 8.4273 21.0209C7.79556 20.6607 7.27148 20.2134 6.85495 19.6797C6.43834 19.1458 6.09644 18.4449 5.82972 17.5775C5.56286 16.7098 5.4294 15.7089 5.4294 14.5744C5.4294 12.9591 5.94382 11.5846 6.97247 10.45C6.49061 9.23558 6.5361 7.8742 7.10908 6.36599C7.48669 6.24573 8.04668 6.33598 8.78877 6.63618C9.531 6.93652 10.0744 7.1938 10.4196 7.40711C10.7648 7.62036 11.0414 7.80107 11.2497 7.94762C12.4609 7.60072 13.7108 7.42724 14.9997 7.42724C16.2887 7.42724 17.5388 7.60072 18.7501 7.94762L19.4922 7.46735C19.9997 7.14689 20.599 6.85321 21.2887 6.58625C21.9788 6.31943 22.5065 6.24594 22.8713 6.3662C23.457 7.87448 23.5092 9.23579 23.0272 10.4502C24.0558 11.5848 24.5704 12.9597 24.5704 14.5746C24.5704 15.7091 24.4365 16.7132 24.17 17.5875C23.9032 18.462 23.5584 19.1623 23.1353 19.6898C22.7118 20.2172 22.1844 20.661 21.553 21.0211C20.9215 21.3815 20.3092 21.6417 19.7169 21.802C19.1244 21.9623 18.4572 22.0828 17.7151 22.1629C18.3919 22.7633 18.7304 23.711 18.7304 25.0056V29.2296C18.7304 29.4696 18.8118 29.6699 18.9748 29.83C19.1375 29.9898 19.3945 30.0369 19.7461 29.9699C22.7672 28.9424 25.2314 27.0905 27.1388 24.4143C29.0461 21.7383 30 18.7255 30 15.375C29.9993 12.5861 29.3284 10.0138 27.9879 7.65801Z" fill="currentColor"/>
                        </svg>
                    </Link>
                    <Link to="https://www.linkedin.com/in/mfrmesa/" target="_blank" className={classes.linksContacto}>
                        <svg className={classes.svg} width="45" height="45" viewBox="0 0 30 30" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_63_26)">
                            <path d="M15 1.875C12.4041 1.875 9.86654 2.64477 7.70815 4.08696C5.54975 5.52915 3.86749 7.579 2.87409 9.97728C1.88069 12.3756 1.62077 15.0146 2.1272 17.5606C2.63363 20.1066 3.88366 22.4452 5.71923 24.2808C7.55479 26.1163 9.89345 27.3664 12.4394 27.8728C14.9854 28.3792 17.6244 28.1193 20.0227 27.1259C22.421 26.1325 24.4709 24.4503 25.913 22.2919C27.3552 20.1335 28.125 17.5959 28.125 15C28.1244 11.5192 26.7414 8.1812 24.2801 5.71992C21.8188 3.25864 18.4808 1.87563 15 1.875ZM22.5 21C22.4988 21.3975 22.3404 21.7783 22.0594 22.0594C21.7783 22.3404 21.3975 22.4988 21 22.5H9.00001C8.60254 22.4988 8.22169 22.3404 7.94063 22.0594C7.65958 21.7783 7.50117 21.3975 7.50001 21V9C7.50116 8.60253 7.65956 8.22167 7.94062 7.94061C8.22167 7.65956 8.60254 7.50115 9.00001 7.5H21C21.3975 7.50115 21.7783 7.65956 22.0594 7.94061C22.3404 8.22167 22.4989 8.60253 22.5 9V21Z" fill="currentColor"/>
                            <path d="M11.2594 10.1249C11.1094 10.118 10.9596 10.1424 10.8195 10.1963C10.6794 10.2503 10.552 10.3328 10.4454 10.4385C10.3387 10.5443 10.2552 10.671 10.2001 10.8106C10.1449 10.9503 10.1194 11.0999 10.125 11.2499C10.1178 11.398 10.1413 11.5459 10.194 11.6845C10.2468 11.823 10.3277 11.9491 10.4317 12.0548C10.5356 12.1605 10.6603 12.2435 10.7979 12.2986C10.9355 12.3537 11.0831 12.3797 11.2313 12.3749H11.2406C11.5383 12.3763 11.8243 12.2596 12.0362 12.0505C12.248 11.8414 12.3683 11.5569 12.3708 11.2593C12.3733 10.9616 12.2577 10.6751 12.0494 10.4625C11.8411 10.2499 11.557 10.1285 11.2594 10.1249Z" fill="currentColor"/>
                            <path d="M17.3531 13.1249C16.9555 13.1083 16.561 13.2009 16.2123 13.3926C15.8636 13.5843 15.574 13.8678 15.375 14.2124V13.1249H13.125V19.8749H15.375V15.7781C15.3934 15.5071 15.5181 15.2544 15.7219 15.0749C15.9669 14.8933 16.2723 14.8128 16.575 14.8499C16.7948 14.8531 17.0092 14.9181 17.1938 15.0374C17.3749 15.2007 17.5138 15.4053 17.5987 15.6338C17.6836 15.8624 17.7119 16.1081 17.6813 16.3499V19.8749H19.875V16.0968C19.875 14.0624 18.7969 13.1249 17.3531 13.1249Z" fill="currentColor"/>
                            <path d="M12.375 13.125H10.125V19.875H12.375V13.125Z" fill="currentColor"/></g><defs><clipPath id="clip0_63_26"><rect width="30" height="30" fill="white"/></clipPath></defs>
                        </svg>
                    </Link>
                </div>
            </div>
            <div className={classes.linksContactoContainer}>
                <form ref={form} onClick={handleFormSubmit}>
                    <div className={classes.mensaje}>
                        <textarea id="mensaje" name="mensaje" value={mensaje.mensaje} itemType="text" onChange={handleChange}></textarea>
                    </div>
                    <button className={classes.boton} type="submit">
                        <FormattedMessage id="enviar"/>
                    </button>
                </form>
            </div>
        </section>
    )
}
